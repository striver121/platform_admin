---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: dev-applications
  namespace: argocd-non-prod
#  annotations:
#    # resolves to 'my-application' and 'shared'
#    argocd.argoproj.io/manifest-generate-paths: demoapp
spec:
  project: platform-dev
  destination:
    server: https://34.31.116.147
  source:
  repoURL: github.com/striver121/platform_devs.git
    targetRevision: master
    path: demoapp/overlays/dev
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
    - Validate=true
#    - CreateNamespace=true
    retry:
      limit: 5
#---
#apiVersion: argoproj.io/v1alpha1
#kind: Application
#metadata:
#  name: dev-applications-01
#  namespace: argocd-non-prod
#spec:
#  project: default
#  destination:
#    server: https://34.31.116.147
#  source:
#    repoURL: github.com/striver121/platform_devs.git
#    targetRevision: master
#    path: dev-apps-defs
#  syncPolicy:
#    automated:
#      prune: true
#      selfHeal: true
#    syncOptions:
#    - Validate=true
##    - CreateNamespace=true
#    retry:
#      limit: 5
